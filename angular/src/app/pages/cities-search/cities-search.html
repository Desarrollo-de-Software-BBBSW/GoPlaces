<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Buscar ciudades por nombre</h2>
</div>
<div class="container mt-4">
  <div class="card shadow">
    <div class="card-body">
      
      <div class="form-group mb-4">
        <label for="citySearchInput">Buscar Ciudad (m√≠nimo 3 caracteres)</label>
        <div class="input-group">
          <input 
            type="text" 
            class="form-control" 
            id="citySearchInput" 
            placeholder="Escribe el nombre de la ciudad..."
            [formControl]="searchControl">
          
          <div *ngIf="isLoading" class="input-group-append">
            <span class="input-group-text">
              <i class="fa fa-spinner fa-spin"></i>
            </span>
          </div>
        </div>
      </div>
      
      <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
        <strong>Error:</strong> {{ errorMessage }}
      </div>
      
      <div *ngIf="cities.length > 0 && !isLoading">
        <h5>Resultados Encontrados ({{ cities.length }})</h5>
        <hr>
        
        <div class="table-responsive shadow-sm" style="max-height: 220px; overflow-y: auto; border: 1px solid #dee2e6; border-radius: 5px;">
          <table class="table table-striped table-hover mb-0">
            <thead style="position: sticky; top: 0; background-color: #f8f9fa; z-index: 1; box-shadow: 0 2px 2px -1px rgba(0,0,0,0.1);">
              <tr>
                <th style="width: 10%;">ID</th>
                <th style="width: 35%;">Nombre</th> <th style="width: 20%;">Pa√≠s</th>
                <th class="text-center" style="width: 35%;">Acci√≥n</th> </tr>
            </thead>
            <tbody>
              <tr *ngFor="let city of cities">
                <td class="align-middle">{{ city.id }}</td>
                <td class="align-middle fw-bold">{{ city.name }}</td>
                <td class="align-middle">{{ city.country }}</td>
                <td class="text-center align-middle">
                  
                  <div class="d-flex justify-content-center gap-2">
                    <button 
                      class="btn btn-success btn-sm text-nowrap" 
                      (click)="saveCity(city)"
                      title="Guardar en mis destinos">
                      <span>üíæ Guardar</span> 
                    </button>
                    
                    <a 
                      class="btn btn-primary btn-sm text-nowrap" 
                      [routerLink]="['/cities', city.id]"
                      title="Ver detalles y opiniones">
                      <span>üëÅÔ∏è Ir</span> 
                    </a>
                  </div>

                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div *ngIf="!cities.length && searchControl.value && !isLoading && !errorMessage" class="alert alert-info">
        No se encontraron ciudades con el nombre: <strong>"{{ searchControl.value }}"</strong>.
      </div>

    </div>
  </div>
</div>